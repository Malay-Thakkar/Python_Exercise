{% extends 'base.html' %}
{% load static %}
{% block body %}

<style>
  .bordercheckoutdiv {
    border: 1px solid #ddd;
    border-radius: 8px;
    padding: 20px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  }
</style>
<container class="productcontainer">
  {% if messages %}
  <div class="alert alert-primary" role="alert" id="messages-container">
    {% for message in messages %}
    {{ message }}
    {% endfor %}
  </div>
  {% endif %}

  <script>
    // Function to hide the messages container after 3 seconds
    setTimeout(function () {
      var messagesContainer = document.getElementById('messages-container');
      if (messagesContainer) {
        messagesContainer.style.display = 'none';
      }
    }, 3000); // 3000 milliseconds = 3 seconds
  </script>
  <h1 class="text-center">Checkout</h1>
  <div class="container mt-4">
    <div class="row">
      <div class="col-md-8">
        <form method="post" action="{% url 'placeorder'%}">
          {% csrf_token %}
        <div class="bordercheckoutdiv">
          <h3>Add Shipping Address details</h3>
            <div class="mb-3">
              <label for="shipping_first_name" class="form-label">First Name:</label>
              <input type="text" class="form-control" id="shipping_first_name" name="shipping_first_name" required>
            </div>
            <div class="mb-3">
              <label for="shipping_last_name" class="form-label">Last Name:</label>
              <input type="text" class="form-control" id="shipping_last_name" name="shipping_last_name" required>
            </div>
            <div class="mb-3">
              <label for="shipping_phone" class="form-label">Phone:</label>
              <input type="text" class="form-control" id="shipping_phone" name="shipping_phone" required>
            </div>
            <div class="mb-3">
              <label for="shipping_email" class="form-label">Email:</label>
              <input type="email" class="form-control" id="shipping_email" name="shipping_email" required>
            </div>
            <div class="mb-3">
              <label for="shipping_address" class="form-label">Address:</label>
              <textarea class="form-control" id="shipping_address" name="shipping_address" required></textarea>
            </div>
            <div class="mb-3">
              <label for="shipping_city" class="form-label">City:</label>
              <input type="text" class="form-control" id="shipping_city" name="shipping_city" required>
            </div>
            <div class="mb-3">
              <label for="shipping_state" class="form-label">State:</label>
              <input type="text" class="form-control" id="shipping_state" name="shipping_state" required>
            </div>
            <div class="mb-3">
              <label for="shipping_note" class="form-label">Note:</label>
              <textarea class="form-control" id="shipping_note" name="shipping_note"></textarea>
            </div>
        </div>
      </div>
      <div class="col-md-4 d-flex justify-content-center  bordercheckoutdiv">
        <div class="table-responsive">
          <table class="table">
            <thead>
              <tr>
                <th>Image</th>
                <th>Name</th>
                <th>Price</th>
                <th>Quantity</th>
              </tr>
            </thead>
            <tbody>
              {% if cart_products %}
              {% for product in cart_products %}
              <tr>
                <td><img class="card-img" src="../../media/{{ product.img }}" alt="Product Image" /></td>
                <td class="font-weight-bold cartprodname">{{ product.name }}</td>
                <td class="font-weight-bold">{{ product.price }}</td>
                <td>
                  {% for key, value in cart_quantity.items %}
                  {% if key == product.product_id|stringformat:'s' %}
                  <span class="quantity-input" style="width: 70px;">{{ value }}</span>
                  {% endif %}
                  {% endfor %}
                </td>
              </tr>
              {% endfor %}
              <tr>
                <th colspan="2"></th>
                <th>Grand Total:</th>
                <th>{{total}} </th>
              </tr>
              <tr>
                <th colspan="2"></th>
                <th>Grand Total with GST(18%):</th>
                <th>{{gsttotal}} </th>
              </tr>
              {% endif %}
            </tbody>
          </table>
          <div class="d-flex m-5 gap-5"><a href="{% url 'cart_summary' %}" class="btn btn-info">Update cart</a>
            <button type="submit" class="btn btn-primary">Place Order</button>
          </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</container>

<script>

</script>
{% endblock %}